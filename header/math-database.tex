\knowledgenewrobustcmd{\atom}[1]{\mathrel{\smashxrightarrow{\ensuremath{#1}}}}
\knowledgenewrobustcmd{\coatom}[1]{\mathrel{\smashxleftarrow{\ensuremath{#1}}}}
\knowledgenewrobustcmd{\symatom}[1]{\mathrel{\smashxleftrightarrow{\ensuremath{#1}}}}

\colorlet{wrote}{cRed}
\colorlet{advised}{cBlue}
\newrobustcmd{\wrote}{\color{wrote}\scriptsize\text{wrote}}
\newrobustcmd{\advised}{\color{advised}\scriptsize\text{advised}}

% ---
% Alphabets, graphs
% ---

\newrobustcmd{\A}{\mathbb{A}} % Finite alphabet of labels
\newrobustcmd{\B}{\mathbb{B}}
\knowledgenewrobustcmd{\Aext}{\cmdkl{\mathbb{A}^\pm}} % Finite alphabet of labels
\knowledgenewrobustcmd\vertex[1]{\cmdkl{V}(#1)}
\knowledgenewrobustcmd\edges[1]{\cmdkl{\+E}(#1)}

\knowledgenewrobustcmd\signatureCRPQ[1]{\cmdkl{\sigma_{\textsf{Reg}(#1^*)}}}

\knowledgenewrobustcmd\qvar{\footnotesize\bullet} % quantified variable
\knowledgenewrobustcmd{\Gpm}{\cmdkl{G^\pm}}

% --- 
% Queries
% ---

\knowledgenewrobustcmd{\atoms}[1]{\cmdkl{\textnormal{Atoms}}(#1)}
\knowledgenewrobustcmd{\vars}[1]{\cmdkl{\textrm{vars}}(#1)} % set of variables of a query

\knowledgenewrobustcmd{\underlying}[1]{\cmdkl{G_{#1}}} % underlying graph

\knowledgenewrobustcmd{\contained}{\mathrel{\cmdkl{\subseteqq}}}
\newrobustcmd{\notcontained}{\mathrel{\kl[\contained]{\not\subseteqq}}}
\newrobustcmd{\strcontained}{
  \mathrel{\withkl{\kl[\contained]}{\cmdkl{%
    \subsetneqq
  }}}
}
\knowledgenewrobustcmd{\semequiv}{\mathrel{\cmdkl{\equiv}}}
\newrobustcmd{\notsemequiv}{\mathrel{\kl[\semequiv]{\not\equiv}}}

\knowledgenewrobustcmd{\nbvar}[2][]{\cmdkl{\|}#2\cmdkl{\|^{#1}_{\textrm{var}}}}
\knowledgenewrobustcmd{\nbatoms}[2][]{\cmdkl{\|}#2\cmdkl{\|^{#1}_{\textrm{at}}}}
\knowledgenewrobustcmd{\size}[1]{\cmdkl{\|}#1\cmdkl{\|}}

\newrobustcmd{\collapse}{\approx}

\knowledgenewrobustcmd\impH{\mathbin{\cmdkl{\Rightarrow}}}

\knowledgenewrobustcmd{\Exp}{\cmdkl{\textnormal{Exp}}} % set of expansions
\knowledgenewrobustcmd{\cdb}{ % canonical database
  \mathrel{\cmdkl{%
    \vDash^{\star}
  }}
}

% --- 
% Classes of queries
% ---

\def\ifempty#1{\ifx\empty#1\empty}
\knowledgenewrobustcmd{\CQ}[1][]{\ifempty{#1}\textnormal{"CQ"}\else\cmdkl{\textnormal{CQ}(#1)}\fi}
\knowledgenewrobustcmd{\CRPQ}[1][]{\ifempty{#1}\textnormal{"CRPQ"}\else\cmdkl{\textnormal{CRPQ}(#1)}\fi}
\knowledgenewrobustcmd{\CtwoRPQ}[1][]{\ifempty{#1}\textnormal{"C2RPQ"}\else\cmdkl{\textnormal{CRPQ}(#1)}\fi}
\knowledgenewrobustcmd{\infUCRPQ}[1][]{\ifempty{#1}\cmdkl{\textnormal{UCRPQ}^\infty}\else\cmdkl{\textnormal{UCRPQ}^\infty(#1)}\fi}
\knowledgenewrobustcmd{\UCRPQ}[1][]{\ifempty{#1}\textnormal{"UCRPQ"}\else\cmdkl{\textnormal{UCRPQ}(#1)}\fi}
\knowledgenewrobustcmd{\UCtwoRPQ}[1][]{\ifempty{#1}\textnormal{"UC2RPQ"}\else\cmdkl{\textnormal{UC2RPQ}(#1)}\fi}


\knowledgenewrobustcmd{\UCRPQSRE}{\ensuremath{\cmdkl{\textup{UCRPQ}(\textup{SRE})}}}
\newrobustcmd{\CRPQSRE}{%
  \withkl{\kl[\UCRPQSRE]}{\cmdkl{%
    \textup{CRPQ}(\textup{SRE})%
  }}%
}%

\knowledgenewrobustcmd{\class}{\mathcal{C}}
\knowledgenewrobustcmd{\Tw}[1][k]{\cmdkl{\mathcal{T\hspace{-.15em}w}_{#1\!}}}
\knowledgenewrobustcmd{\Pw}[1][k]{\cmdkl{\mathcal{P\hspace{-.05em}w}_{#1\!}}}
\knowledgenewrobustcmd{\ContrPw}[1][k]{\cmdkl{\mathcal{C\hspace{-.05em}p\hspace{-.05em}w}_{#1\!}}}
\knowledgenewrobustcmd{\PwOneWay}[1][k]{\cmdkl{\mathcal{1P\hspace{-.05em}w}_{#1\!}}}
% \knowledgenewrobustcmd{\ContrPwOneWay}[1][k]{\cmdkl{\mathcal{C\hspace{-.05em}p\hspace{-.05em}w}^{\smash{1w}}_{#1\!}}}
\knowledgenewrobustcmd{\ContrPwOneWay}[1][k]{\cmdkl{\mathcal{1\hspace{-.08em}C\hspace{-.05em}p\hspace{-.05em}w}_{#1\!}}}
\knowledgenewrobustcmd{\ContrTw}[1][k]{\cmdkl{\mathcal{C\hspace{-.05em}t\hspace{-.05em}w}_{#1\!}}}
\knowledgenewrobustcmd{\TwOneWay}[1][k]{\cmdkl{\mathcal{1T\hspace{-.15em}w}_{#1\!}}}
% \knowledgenewrobustcmd{\ContrTwOneWay}[1][k]{\cmdkl{\mathcal{C\hspace{-.05em}t\hspace{-.05em}w}^{\smash{1w}}_{#1\!}}}
\knowledgenewrobustcmd{\ContrTwOneWay}[1][k]{\cmdkl{\mathcal{1\hspace{-.08em}C\hspace{-.05em}t\hspace{-.05em}w}_{#1\!}}}
\newrobustcmd\bw{\textrm{bw}}

% ---
% Refinements & Approximations
% ---

\newcommand{\anexpansion}{\xi}
\knowledgenewrobustcmd{\Refin}[1][]{\cmdkl{\textnormal{Ref}^{\smash{#1}}}}
\knowledgenewrobustcmd{\MUA}[2]{\cmdkl{\ensuremath{\textnormal{App}_{#2}(#1)}}}
\knowledgenewrobustcmd{\MUAHom}[2]{\cmdkl{\ensuremath{\textnormal{App}_{#2}^{\smash{\star}}(#1)}}}
\knowledgenewrobustcmd{\MUAHomBounded}[3]{\cmdkl{\ensuremath{\textnormal{App}_{#2}^{\smash{\star,#3}}(#1)}}}
\knowledgenewrobustcmd{\typeStw}{\cmdkl{\textnormal{type}}}
\knowledgenewrobustcmd{\Qapp}[1][k]{\cmdkl{\ensuremath{\textnormal{App}_{\Tw[#1]}^{\smash{\textup{zip}}}(\gamma)}}}
\knowledgenewrobustcmd{\contract}[1]{\cmdkl{[}#1\cmdkl{]}}

\knowledgenewrobustcmd\upquery[1]{#1^{\cmdkl{\uparrow}}}

% ---
% Semantic tw > tree decompositions
% ---

\knowledgenewrobustcmd\bagmap{\cmdkl{\mathbf{v}}}
\knowledgenewrobustcmd\tagmap{\cmdkl{\mathbf{t}}}
\knowledgenewrobustcmd\tagmappath[1]{\cmdkl{\mathbf{t}[#1]}}
\newrobustcmd\tagmappathprime[1]{%
  \withkl{\kl[\tagmappath]}{%
    \cmdkl{\mathbf{t}'[#1]}%
  }%
}


% ---
% Semantic tw > bounds
% ---

\disablecommand\ell
\suggestcommand\ell{Use instead \l for bound on the size of refinements.}
\knowledgerenewcommand{\l}{\cmdkl{\LaTeXell}}
\knowledgenewrobustcmd{\lOne}{\cmdkl{\LaTeXell_1}}
\knowledgenewrobustcmd{\avoid}{\textsf{avoid}}
\knowledgenewrobustcmd{\trap}{\textsf{trap}}

% ---
% Semantic tw > axioms
% ---

\knowledgenewrobustcmd\itemClosureInfCQ{\cmdkl{\textup{\textrm{(1)}}}}
\knowledgenewrobustcmd\itemClosureUCRPQ{\cmdkl{\textup{\textrm{(2)}}}}
\knowledgenewrobustcmd\itemClosureUCRPQSimple{\cmdkl{\textup{\textrm{(3)}}}}

% ---
% Semantic tw > misc
% ---

\knowledgenewrobustcmd{\pathl}{\cmdkl{\mathbf{P}_{\!l}}} % path-l approximation query
\knowledgenewrobustcmd\subaut[3]{#1\cmdkl{[#2,#3]}} % subautomaton
\newrobustcmd{\fun}{f}

% ---
% Minimization > approximations
% ---

\knowledgenewrobustcmd{\App}[3]{\cmdkl{\textup{App}_{#2}^{\smash{\leq #3}}(#1)}}
\knowledgenewrobustcmd{\AppInf}[2]{\cmdkl{\textup{App}_{#2}^{\infty}(#1)}}


% ---
% Minimization > segments
% ---

\knowledgenewrobustcmd{\seggraph}{\mathop{\cmdkl{\+{S\!G}}}}

\knowledgenewrobustcmd{\nbseg}[2][]{\cmdkl{\|}#2\cmdkl{\|^{#1}_{\textrm{seg}}}}
\knowledgenewrobustcmd{\nbsegmentsOw}[2][]{\cmdkl{\|}#2\cmdkl{\|^{#1}_{\textrm{1seg}}}}
\knowledgenewrobustcmd{\nbsegmentsTw}[2][]{\cmdkl{\|}#2\cmdkl{\|^{#1}_{\textrm{2seg}}}}

% ---
% Minimization > proof decidability minimization
% ---

\newrobustcmd{\weakequiv}[1]{
  \mathrel{\withkl{\kl[\weakequiv]}{\cmdkl{%
    \sim_{#1}
  }}}
}
\knowledge{\weakequiv}{notion}

% ---
% Minimization > lowerbounds
% ---

\knowledgenewrobustcmd{\classCRPQ}{\cmdkl{\+Q}}
\newrobustcmd{\marking}{\triangledown}

\makeatletter
\newcommand\incircbin
{%
  \mathpalette\@incircbin
}
\newcommand\@incircbin[2]
{%
  \mathbin%
  {%
    \ooalign{\hidewidth$#1#2$\hidewidth\crcr$#1\bigcirc$}%
  }%
}
\makeatother
\knowledgenewrobustcmd{\disconj}{\mathbin{\cmdkl{\incircbin{\land}}}}
\knowledgenewrobustcmd{\weakunion}{\mathbin{\cmdkl{\incircbin{\lor}}}}

\knowledgenewrobustcmd{\erasingmorphism}[2][]{\cmdkl{\phi^{#1}_{-#2}}}
\knowledgenewrobustcmd{\autoclass}[1]{\cmdkl{\+A_{#1}}}
\knowledgenewrobustcmd{\InclusionPb}[1][\autoclass{\classCRPQ}]{\cmdkl{\textsc{NFA Inclusion}(#1)}}

\knowledgenewrobustcmd{\alphabetmarking}{\cmdkl{\mathbb{M}}}

\knowledgenewrobustcmd{\axiomsCanon}{\cmdkl{\textup{(\textsf{Cnz})$_*$}}}
\knowledgenewrobustcmd{\axiomCanonMonotonicity}{\cmdkl{\textup{(\textsf{Cnz})$_\textsf{monotonic}$}}}
\knowledgenewrobustcmd{\axiomCanonContracted}{\cmdkl{\textup{(\textsf{Cnz})$_\textsf{contracted}$}}}
\knowledgenewrobustcmd{\axiomCanonCore}{\cmdkl{\textup{(\textsf{Cnz})$_\textsf{str-onto}$}}}
\knowledgenewrobustcmd{\axiomCanonNonRed}{\cmdkl{\textup{(\textsf{Cnz})$_\textsf{non-red}$}}}
\knowledgenewrobustcmd{\axiomCanonContainment}{\cmdkl{\textup{(\textsf{Cnz})$_\textsf{containment}$}}}
\knowledgenewrobustcmd{\axiomCanonMarking}{\cmdkl{\textup{(\textsf{Cnz})$_\textsf{marking}$}}}
\knowledgenewrobustcmd{\axiomStrongCanonCore}{\cmdkl{\textup{(\textsf{SCnz})$_\textsf{str-onto}$}}}

\knowledgenewrobustcmd{\axiomVarMarkingLoop}{\cmdkl{\textup{(\textsf{VM})$_\textsf{loop}$}}}
\knowledgenewrobustcmd{\axiomVarMarkingOut}{\cmdkl{\textup{(\textsf{VM})$_\textsf{out}$}}}
\knowledgenewrobustcmd{\axiomVarMarkingIn}{\cmdkl{\textup{(\textsf{VM})$_\textsf{in}$}}}

% ---
% Minimization > misc
% ---

\knowledgenewrobustcmd{\typeMin}[2]{\cmdkl{\textup{type}_{#1}(#2)}}

\knowledgenewrobustcmd{\Unfold}{\mathop{\cmdkl{\+U}}} % unfolding

\newcommand{\xrightarrowdbl}[2][]{%
  \xrightarrow[#1]{#2}\mathrel{\mkern-14mu}\rightarrow
}
\knowledgenewrobustcmd{\surjto}{\mathrel{\cmdkl{\xrightarrowdbl{\smash{\textit{\tiny hom}}}}}}

\newcommand{\orig}{\textit{orig}}
\newcommand{\cont}{\textit{contr}}

\knowledgenewrobustcmd{\Encoding}{\mathop{\cmdkl{\textrm{Enc}}}}

% ---
% Prelims
% ---

\newrobustcmd{\sqlop}[1]{\textsf{\textcolor{maincolor}{#1}}}