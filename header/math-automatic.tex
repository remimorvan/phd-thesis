% ---
% Constructions on structures / presentations 
% --- 
\knowledgenewrobustcmd\prodpres{\mathbin{\cmdkl{\underline{\times}}}}

\renewrobustcmd{\ker}[1]{\withkl{\kl[\ker]}{\mathrel{\cmdkl{\mathrm{ker}_{#1}}}}} % ker of hom
	\knowledge{\ker}{notion}

% ---
% Idempotent core
% --- 
\knowledgenewrobustcmd\marked[1]{#1^{\cmdkl{\dag}}}
\knowledgenewrobustcmd\unarypred[1]{\cmdkl{P_{#1}}}
\knowledgenewrobustcmd\extendedSignature[2]{\cmdkl{#1_{#2}}}

% ---
% Hom-reg relation 
% ---
\knowledgenewrobustcmd{\homregto}{\mathrel{\cmdkl{\smashxrightarrow{reg hom}}}}
\newrobustcmd{\nothomregto}{\mathrel{\kl[\homregto]{\centernot{\smashxrightarrow{reg hom}}}}}

% ---
% rational presentations
% ---
\knowledgenewrobustcmd{\domainPres}[1]{\cmdkl{#1_{\mathrm{dom}}}}
\knowledgenewrobustcmd{\relPres}[2]{\cmdkl{#2}_{\! #1}}
\newrobustcmd{\smallpad}{%
	\hspace{.05em}\rule{.3em}{.075em}\hspace{.05em}
}
\knowledgenewrobustcmd{\pad}{%
	\cmdkl{\text{\textvisiblespace}}
}
\knowledgenewrobustcmd{\SigmaPair}[1][2]{\cmdkl{\Sigma}^{#1}_{\raisebox{.25em}{\smallpad}}\mkern-5mu}
\knowledgenewrobustcmd{\convol}{\mathbin{\cmdkl{\otimes}}} % convolution of two words of languages
\knowledgenewrobustcmd{\convolRel}[1]{#1^{\cmdkl{\otimes}}} % convolution of a relation

% ---
% Hom problem & classes 
% --- 
\knowledgenewrobustcmd\Fin[1][\sigma]{\cmdkl{\mathrm{Fin}_{#1}}}
\knowledgenewrobustcmd\Aut[1][\sigma]{\cmdkl{\mathrm{Aut}_{#1}}}
\knowledgenewrobustcmd\FinPres[1][\sigma]{\cmdkl{\mathcal{F\!in}^{\smash{\textsf{pres}}}_{#1}}}
\knowledgenewrobustcmd\AutPres[1][\sigma]{\cmdkl{\mathcal{Aut}^{\smash{\textsf{pres}}}_{#1}}}

\newrobustcmd{\HomClassNoKl}[2]{\mathrm{Hom}(#1,\,#2)}
\knowledgenewrobustcmd\HomFinClass[1]{\cmdkl{\HomClassNoKl{\mathrm{Fin}}{#1}}}
\knowledgenewrobustcmd\HomAllClass[1]{\cmdkl{\HomClassNoKl{\mathrm{All}}{#1}}}

\newrobustcmd{\classStruct}{\mathcal{Cls}}

\newrobustcmd{\HomDecNoKl}[2]{\mathcal{H\!om}(#1,\,#2)}
\knowledgenewrobustcmd\HomDec[2]{\cmdkl{\HomDecNoKl{#1}{#2}}}
\knowledgenewrobustcmd\HomFinDec[1]{\cmdkl{\HomDecNoKl{\mathrm{Fin}}{#1}}}
\knowledgenewrobustcmd\HomAutDec[1]{\cmdkl{\HomDecNoKl{\mathrm{Aut}}{#1}}}

\newrobustcmd{\HomRegDecNoKl}[2]{\mathcal{H\!om}^{\smash{\textsf{reg}}}(#1,\,#2)}
\knowledgenewrobustcmd\HomRegDec[2]{\cmdkl{\HomRegDecNoKl{#1}{#2}}}
\knowledgenewrobustcmd\HomRegFinDec[1]{\cmdkl{\HomRegDecNoKl{\mathrm{Fin}}{#1}}}
\knowledgenewrobustcmd\HomRegAutDec[1]{\cmdkl{\HomRegDecNoKl{\mathrm{Aut}}{#1}}}

% ---
% Concrete graphs / structures 
% ---
\knowledgenewrobustcmd\link[1]{\cmdkl{\?L_{#1}}}
\knowledgenewrobustcmd{\zigzag}[2]{\cmdkl{\?Z_{#2}^{(#1)}}}
\knowledgenewrobustcmd{\transitiveTournament}[1]{\cmdkl{\?T_{#1}}}
\knowledgenewrobustcmd{\pathGraph}[1]{\cmdkl{\?P_{#1}}}
\knowledgenewrobustcmd{\clique}[1]{\cmdkl{\?K_{#1}}}
\knowledgenewrobustcmd{\omegaClique}{\cmdkl{\?K_{<\omega}}}
\knowledgenewrobustcmd{\omegaCliquePres}{\cmdkl{\â€¢K_{<\omega}}}

\knowledgenewrobustcmd\projHom[1]{\cmdkl{\pi_{#1}}} % projection homomorphism
\knowledgenewrobustcmd{\FederVardi}[1]{\cmdkl{\+U(#1)}} % Feder-Vardi construction

% ---
% First-order logic for synchronous relations
% ---
\knowledgenewrobustcmd{\lastLetter}[1]{\cmdkl{\+l_{#1}}}
\knowledgenewrobustcmd{\equalLength}{\cmdkl{\+{el}}}
\knowledgenewrobustcmd{\prefix}{\cmdkl{\preceq_{\textrm{pref}}}}
\knowledgenewrobustcmd{\univStructSynchronous}[1]{\cmdkl{#1^*}}
\knowledgenewrobustcmd{\signatureSynchronous}[1]{\sigma_{#1}^{\smash{\textrm{sync}}}}

% ---
% Hyperedge consistency
% ---
\knowledgenewrobustcmd{\subsumed}{\mathrel{\cmdkl{\sqsubseteq}}}
\knowledgenewrobustcmd{\LatticeGuessFunctions}[2]{\cmdkl{\langle \pset{#2}^{#1},\, \subsumed \rangle}}
\knowledgenewrobustcmd{\topLatticeGuessFunctions}[1]{\cmdkl{\Lambda_{#1}}}

\newcommandPIE{\HCOperator}{\withkl{\kl[\HCOperator]}{\cmdkl{\symcal{H\!C}#1#2#3}}}
	\knowledge{\HCOperator}{notion}
\knowledgenewrobustcmd{\HCFixpoint}[2]{\cmdkl{H^{\,*}_{\smash{#1,#2}}}}

% ---
% Misc. dichotomy theorem
% ---
\knowledgenewrobustcmd{\unaryType}[2]{\cmdkl{\mu_{#2}(#1)}}
\knowledgenewrobustcmd{\structOfUnaryType}[1]{\cmdkl{\?1_{#1}}}
\knowledgenewrobustcmd{\ConstrUndecHom}[1]{#1^{\cmdkl{\star}}}
\knowledgenewrobustcmd{\rightquotient}[2]{#1\mathbin{\cmdkl{/}}#2}

\knowledgenewrobustcmd{\itemDTFinDual}{\cmdkl{\text{\bfseries\textup{(\textsf{DT})$_\textsf{fin-dual}$}}}}
\knowledgenewrobustcmd{\itemDTHomDec}{\cmdkl{\text{\bfseries\textup{(\textsf{DT})$_\textsf{hom-dec}$}}}}
\knowledgenewrobustcmd{\itemDTHomRegDec}{\cmdkl{\text{\bfseries\textup{(\textsf{DT})$_\textsf{hom-reg-dec}$}}}}
\knowledgenewrobustcmd{\itemDTEqual}{\cmdkl{\text{\bfseries\textup{(\textsf{DT})$_\textsf{equal}$}}}}
\knowledgenewrobustcmd{\itemDTFirstOrder}{\cmdkl{\text{\bfseries\textup{(\textsf{DT})$_\textsf{first-order}$}}}}

%%%%%%
% Classes of relations
%%%%%%
\knowledgenewrobustcmd{\REC}{\cmdkl{\ensuremath{\textsc{Rec}}}}%
\knowledgenewrobustcmd\kREC[1][k]{\cmdkl{\ensuremath{#1\textsc{-Rec}}}}
\knowledgenewrobustcmd\kPROD[1][k]{\cmdkl{\ensuremath{#1\textsc{-Prod}}}}

% ---
% Separation to Colourability
% ---
\knowledgenewrobustcmd{\Germ}{\cmdkl{\textrm{Germ}}} % germinal configurations
\newrobustcmd{\GermC}[1]{\kl[\Germ]{\color{#1}\textrm{Germ}}} % variant with color
\knowledgenewrobustcmd{\Reach}{\cmdkl{\textrm{Reach}}}
\newrobustcmd{\ReachC}[1]{\kl[\Reach]{\color{#1}\textrm{Reach}}} % variant with color

\knowledgenewrobustcmd{\incompGraph}[2]{\cmdkl{\+{I\mkern-1.5mu nc}_{#1,#2}}} % incompatibility graph
\knowledgenewrobustcmd{\compL}{\cmdkl{\textnormal{\small(\textsc{comp}${}_\ell$)}}}
\knowledgenewrobustcmd{\compR}{\cmdkl{\textnormal{\small(\textsc{comp}${}_\textit{r}$)}}}
\knowledgenewrobustcmd{\compLpr}{\cmdkl{\textnormal{\small(\textsc{comp}${}'_\ell$)}}}
\knowledgenewrobustcmd{\compRpr}{\cmdkl{\textnormal{\small(\textsc{comp}${}'_\textit{r}$)}}}

\knowledgenewrobustcmd{\Id}{\cmdkl{\+{I\mkern-1.5mu d}}} % identity relation

\newrobustcmd{\bSymb}{\textcolor{cBlue}{b}}
\newrobustcmd{\rSymb}{\textcolor{cRed}{r}}

\knowledgenewrobustcmd{\AutGraph}[2]{\cmdkl{\langle #1,#2\rangle}}%
\knowledgenewrobustcmd{\configs}[1][\+T]{\cmdkl{\textrm{Conf}_{#1}}}
\knowledgenewrobustcmd{\confGraph}[1][\+T]{\cmdkl{{\+{C\mkern-1.5mu on\!f}}_{\!#1}}}

\knowledgenewrobustcmd{\autequiv}[1][\+R]{\cmdkl{\sim_{\!#1}}} % todo:wtf is this?