\RequirePackage{luatex85}
\documentclass[a4paper,sfsidenotes,twoside,justified,nobib]{tufte-book-custom}
% \usepackage{showframe}

\hypersetup{colorlinks}

\title[Homomorphism Problems]{Homomorphism Problems\\from Query Minimization in Graph Databases\\ to the Frontier of Decidability in Automatic Structures}
\author{Rémi Morvan}


\setcounter{secnumdepth}{3}

% Dependencies
\input{header/colour-palette}
\input{header/dependencies}
\input{header/tikz}
\input{header/kl-config}
\input{header/theorems}

% Macros and math commands
\input{header/macros}
\input{header/math}
\input{header/math-database}
\input{header/math-automatic}

% Knowledge files
\input{kl/abbreviations.kl}
\input{kl/complexity.kl}
\input{kl/misc.kl}
\input{kl/structures.kl}
\input{kl/homomorphism.kl}
\input{kl/first-order.kl}
\input{kl/regular-languages.kl}
\input{kl/concrete-graphs.kl}

% Knowledge files for graph databases

% Knowledge files for automatic structures
\input{kl/automatic-struct/duality.kl}
\input{kl/automatic-struct/automatic-structures.kl}
\input{kl/automatic-struct/decision-problems.kl}
\input{kl/automatic-struct/turing-machine.kl}
\input{kl/automatic-struct/relations.kl}
\input{kl/automatic-struct/colouring.kl}
\input{kl/automatic-struct/misc-dichotomy.kl}

% Biblio 

% Biblio
% \usepackage[
% 	style=alphabetic,
% 	citetracker=true,	
% 	citereset=chapter,
% 	backend=biber
% ]{biblatex}
% \addbibresource{bib-automatic-graphs}
% \addbibresource{bib-complexity}
\usepackage[
  style=alphabetic,
  autocite=footnote,
  backend=biber
]{biblatex}
\bibliography{bib-abbrev,bib-automatic-graphs,bib-complexity}

\begin{document}

\frontmatter
\include{parts/titlepage}
\include{parts/copyright}
\include{parts/contents}

\mainmatter
\chapter*{Abstract}
\addcontentsline{toc}{chapter}{Abstract}

\chapter*{Résumé étendu}
\addcontentsline{toc}{chapter}{Résumé étendu}

\chapter*{Ideas/Todos}

\begin{itemize}
	\item Change definition of CQ/CRPQ to have vertices. This allows for better duality,
		and also better statement for the Semantical Structure Theorem (in some prop we get
		``foo is an edge contraction of bla'' instead of ``is a minor of'').
		Update the definition of `one-way internal path' to allow for $n=0$.
	\item TODO:allow autocite in margin.
		TODO: citation at wrong place in margin.
		TODO:do NOT overwrite options for sidenote, etc.
		See \texttt{tufte-book-custom.cls}.
\end{itemize}

\include{parts/intro/ch-intro}

\include{parts/general-preliminaries/ch-general-preliminaries}

\part{Querying Graph Databases}

\include{parts/preliminaries-graph-databases/ch-preliminaries-graph-databases}

\chapter{Minimization of Conjunctive Regular Path Queries}

\chapter[{Semantic Tree-Width and Path-Width of Conjunctive Regular Path Queries}]{Semantic Tree-Width and Path-Width\\of Conjunctive Regular Path Queries}

% \chapter{Synthesis of Conjunctive Regular Path Queries}

\chapter{Conclusion \& Open Problems}


Extend the notion of `strong minimality` using the axioms used in the lower bound (`str-onto`): call such canonical databases / extensions `structurally minimal'.
Prove or disprove the following result: ``a CRPQ has one-way semantic tree-width at least $k$ "iff" it has an expansion that is structurally minimal and whose core has tree-width at least $k$''. In general: what about minor-closed classes?
Extend Grohe's Theorem to CRPQs (or maybe to a subclass of CRPQs, "eg" those whose
structurally minimal canonical databases characterize membership to minor-closed classes).

\part[The Frontier of Decidability in Automatic Structures]{The Frontier of Decidability\\in Automatic Structures}

\include{parts/preliminaries-automatic-structures/ch-preliminaries-automatic-structures}
\include{parts/dichotomy-theorem/ch-dichotomy-theorem}

\chapter{The Algebras for Automatic Relations and Beyond: \\the Relative Membership Problem for Pseudovarieties of Regular Languages}

\lipsum[1]
\lipsum[1]

\begin{theorem}
	\lipsum[1]
\end{theorem}

\lipsum[1]

\begin{proof}
	\lipsum[1]
\end{proof}

\lipsum[1]

\chapter{Conclusion \fancyand~Open Problems}

\backmatter
% \begin{fullwidth}
% 	\chapter*{Bibliography}
% 	\addcontentsline{toc}{chapter}{Bibliography}
% 	\setlength{\columnsep}{8mm}
% 	\begin{multicols}{2}
% 		\printbibliography[heading=none]
% 	\end{multicols}
% \end{fullwidth}
\chapter*{Bibliography}
\addcontentsline{toc}{chapter}{Bibliography}
\printbibliography[heading=none]

\end{document}

