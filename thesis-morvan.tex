\RequirePackage{luatex85}
\documentclass[a4paper,sfsidenotes,twoside,justified,nobib]{tufte-book-custom}
% \usepackage{showframe}

\hypersetup{colorlinks}

\title[Homomorphism Problems]{Homomorphism Problems\\from Query Minimization in Graph Databases\\ to the Frontier of Decidability in Automatic Structures}
\author{Rémi Morvan}

% Biblio
\usepackage[
  style=alphabetic,
  autocite=footnote,
  backend=biber
]{biblatex}
\bibliography{bib-automatic-graphs}
\bibliography{bib-complexity}

%todo: add \citereset at end of each chapter

% Dependencies
\input{header/colour-palette}
\input{header/dependencies}
\input{header/tikz}
\input{header/kl-config}
\input{header/theorems}

% Macros and math commands
\input{header/macros}
\input{header/math}
\input{header/math-database}
\input{header/math-automatic}

% Knowledge files
\input{kl/abbreviations.kl}
\input{kl/complexity.kl}
\input{kl/misc.kl}
\input{kl/structures.kl}
\input{kl/homomorphism.kl}
\input{kl/first-order.kl}
\input{kl/regular-languages.kl}
\input{kl/concrete-graphs.kl}

% Knowledge files for graph databases

% Knowledge files for automatic structures
\input{kl/automatic-struct/duality.kl}
\input{kl/automatic-struct/automatic-structures.kl}
\input{kl/automatic-struct/decision-problems.kl}
\input{kl/automatic-struct/turing-machine.kl}
\input{kl/automatic-struct/relations.kl}
\input{kl/automatic-struct/colouring.kl}
\input{kl/automatic-struct/misc-dichotomy.kl}


\setcounter{secnumdepth}{3}

\begin{document}

\frontmatter
\include{parts/titlepage}
\include{parts/copyright}
\include{parts/contents}

\mainmatter
\chapter*{Abstract}
\addcontentsline{toc}{chapter}{Abstract}

\chapter*{Résumé long}
\addcontentsline{toc}{chapter}{Résumé long}

\chapter*{Ideas/Todos}
\addcontentsline{toc}{chapter}{Ideas/Todos}

\begin{itemize}
	\item Change definition of CQ/CRPQ to have vertices. This allows for better duality,
		and also better statement for the Semantical Structure Theorem (in some prop we get
		``foo is an edge contraction of bla'' instead of ``is a minor of'').
		Update the definition of `one-way internal path' to allow for $n=0$.
\end{itemize}

\chapter{Introduction}

\part{Querying Graph Databases}

\chapter{Query Languages for Graph Databases}

\section{Elementary Notations}

\subsection{Blabla}

% \begin{figure}
% 	\centering
% 	\includegraphics[width=\linewidth]{fig/free_algebras.png}
% 	\caption{My super nice caption.}
% \end{figure}

\begin{table}
	\centering
	\begin{tabular}{cc}
		\toprule
		a & b \\ \midrule
		0 & 1 \\
		1 & 0 \\ \bottomrule
	\end{tabular}
	\caption{My super nice caption.}
\end{table}

\citereset
Hello this is a citation \cite{Bringhurst2005}.
Hello Q\sidenote{Qy first sidenote!} world and another test \cite{Bringhurst2005}.
\[\forall x \in \gamma,\, \exists y\in \delta, \delta \to \gamma\]
\[L \subseteq \Sigma^*\]
\[0 \in \symbb{N}\]
\[\symcal{AbcDefGhiJkl}\]
\[\symscr{AbcDefGhiJkl}\]
\[\symfrak{AbcDefGhiJkl}\]

\lipsum[1-2]

\begin{figure}[htb]
	\centering
	\includegraphics[width=\linewidth]{fig/landscape.png}
	\caption{The landscape of rationality.}
\end{figure}

\lipsum[3-10]

\chapter[Evaluation and Containment of Conjunctive Regular Path Queries]{Evaluation and Containment\\ of Conjunctive Regular Path Queries}

\chapter{Minimization of Conjunctive Regular Path Queries}

\chapter[{Semantic Tree-Width and Path-Width of Conjunctive Regular Path Queries}]{Semantic Tree-Width and Path-Width\\of Conjunctive Regular Path Queries}

% \chapter{Synthesis of Conjunctive Regular Path Queries}

\chapter{Conclusion \& Open Problems}


Extend the notion of `strong minimality` using the axioms used in the lower bound (`str-onto`): call such canonical databases / extensions `structurally minimal'.
Prove or disprove the following result: ``a "CRPQ" has "one-way semantic tree-width" at least $k$ "iff" it has an expansion that is structurally minimal and whose core has tree-width at least $k$''. In general: what about minor-closed classes?
Extend Grohe's Theorem to CRPQs (or maybe to a subclass of CRPQs, "eg" those whose
structurally minimal canonical databases characterize membership to minor-closed classes).

\part[The Frontier of Decidability in Automatic Structures]{The Frontier of Decidability\\in Automatic Structures}

\input{parts/preliminaries-automatic-structures/ch-preliminaries-automatic-structures}
\input{parts/dichotomy-theorem/ch-dichotomy-theorem}

\chapter{The Algebras for Automatic Relations and Beyond:\\the Relative Membership Problem for Pseudovarieties of Regular Languages}

\chapter{Conclusion \fancyand~Open Problems}

\backmatter
\begin{fullwidth}
	\chapter*{Bibliography}
	\addcontentsline{toc}{chapter}{Bibliography}
	\setlength{\columnsep}{8mm}
	\begin{multicols}{2}
		\printbibliography[heading=none]
	\end{multicols}
\end{fullwidth}

\end{document}

