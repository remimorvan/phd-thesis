\chapter{Minimization of Conjunctive Regular Path Queries}
\label{ch:minimization-CRPQ}
\renewcommand\thefigure{\thechapter.\arabic{figure}}

\begin{chapterpresentation}
	\begin{abstract}
		We study the \emph{minimization problem} for Conjunctive Regular Path Queries (CRPQs) and unions of CRPQs (UCRPQs).
		This is the problem of checking, given a query and a number $k$, whether the query is  equivalent to one of size at most $k$. 
		For CRPQs we consider the size to be the number of atoms, and for UCRPQs the maximum number of atoms in a CRPQ therein, motivated by the fact that the number of atoms has a leading influence on the cost of query evaluation.

		We show that the minimization problem is decidable, both for CRPQs and UCRPQs.
		We provide a "2ExpSpace" upper-bound for CRPQ minimization, based on a brute-force enumeration algorithm, and an "ExpSpace" lower-bound. For UCRPQs, we show that the problem is "ExpSpace"-complete, having thus the same complexity as the classical containment problem. The upper bound is obtained by defining and computing a notion of maximal under-approximation.
		Moreover, we show that for UCRPQs using the so-called \emph{simple regular expressions} consisting of concatenations of expressions of the form $a^+$ or $a_1 + \dotsb + a_k$, the minimization problem becomes "PiP2"-complete, again matching the complexity of containment.
	\end{abstract}
	\par\bigskip\bigskip
	\begin{acknowledgements}
		This chapter is mostly a reproduction of the eponymous paper that was published in PODS '25 \cite{FigueiraMorvanRomero2025Minimizing}, that received the \emph{Distinguished Paper Award}.
		Proofs were incorporated in the body; the preliminaries and
		part of the introduction was moved to \Cref{ch:prelim-graph-databases}.
		It is a joint work with Diego Figueira and Miguel Romero.
	\end{acknowledgements}
	\clearpagepresentation
	\chaptertocstandalone
\end{chapterpresentation}

\input{parts/minimization-CRPQ/sec-intro}
% \input{parts/minimization-CRPQ/sec-prelims}
\input{parts/minimization-CRPQ/sec-conditions}
\input{parts/minimization-CRPQ/sec-upper-bound-crpqs}
\input{parts/minimization-CRPQ/sec-minimization-ucrpq}
\input{parts/minimization-CRPQ/sec-lowerbounds}
\input{parts/minimization-CRPQ/sec-discussion}

\clearpage
\begin{subappendices}
	\input{parts/minimization-CRPQ/sec-apdx-lowerbound-variables}
\end{subappendices}